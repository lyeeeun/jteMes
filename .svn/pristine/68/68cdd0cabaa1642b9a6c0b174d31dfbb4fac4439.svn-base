<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>Login</title>
<style type="text/css">
body, html {
	width: 100%;
	height: 100%;
	margin: 0px;
	padding: 0px;
}
.login_background{
	width: 100%;
	height: 100%;
	margin: 0px;
	padding: 0px;
	background: #ceceee;
}
.login_logo {
	position: absolute;
	width: 350px;
	left: 49%;
	top: 20%;
	margin-left: -140px;
	margin-top: -50px;
}

.login_logo img{
	width: 100%;
}

.login_box {
	position: absolute;
	width: 500px;
	height: 400px;
	left: 50%;
	top: 55%;
	margin-left: -250px;
	margin-top: -200px;
	background: #fff;
	/*box-shadow: -6px 6px orange; */
}
.login_header{
	width:100%; 
	background:#5da62b; 
	color:white; 
	height:80px;
	line-height:80px; 
	text-align:center; 
	vertical-align:middle;
	font-size:25px;
	font-weight:bold;
	letter-spacing:2px;
}
input.login_info{
	height:35px; 
	font-size:16px; 
	width:470px; 
	padding:5px; 
	margin-top:30px; 
	border:none; 
	border-bottom:2px solid #BDBDBD;
}

input.login_submit{
	height:60px; 
	font-size:20px; 
	font-weight: bold;
	width:470px; 
	padding:5px; 
	margin-top:10px; 
	border:none; 
	letter-spacing:10px;
}
.login_etc{
	margin:10px;
	text-align:left;
	border-top:1px solid #ceceee;
	height:30px;
	line-height:30px;
}
.login_etc a{
	color:black;
	text-decoration:none;
}
.login_reg{
	margin-top:10px;	
}
.login_error{
	margin:10px;
	color:red;
}
</style>

	<script type="text/javascript" th:src="@{/util/jquery-3.4.1.min.js}"></script>
	<!-- 순서에 유의 -->
	<script type="text/javascript" th:src="@{/common/secure/rsa.js}"></script>
	<script type="text/javascript" th:src="@{/common/secure/jsbn.js}"></script>
	<script type="text/javascript" th:src="@{/common/secure/prng4.js}"></script>
	<script type="text/javascript" th:src="@{/common/secure/rng.js}"></script>
	<script type="text/javascript">
		function login() {
			var id = $("#username_text");
			var pw = $("#password_text");
	
			if (id.val() == "") {
				alert("Please Type your login id");
				id.focus();
				return false;
			}
	
			if (pw.val() == "") {
				alert("Please Type your password");
				pw.focus();
				return false;
			}
	
			if("Y"=="[[${_RSAUseYn}]]"){
				// rsa 암호화 적용
				var rsa = new RSAKey();
				rsa.setPublic($('#RSAModulus').val(), $('#RSAExponent').val());
		
				$("#username").val(rsa.encrypt(id.val()));
				$("#password").val(rsa.encrypt(pw.val()));
			}else{
				// rsa 암호화 미적용
				$("#username").val(id.val());
				$("#password").val(pw.val());
			}
			return true;
		}
	</script>

</head>
<body>
	<div class="login_background">
		<!-- <div class="login_logo"><img src="https://www.hhi.co.kr/images/common/pclogo.png"/></div> -->
		<!-- <div class="login_logo"><img src="/image/main_logo.jpg"/></div> -->
		<div class="login_logo"><span style="color: #0054A6;font-size: 70px;font-weight: 700;">Hi-TIMMS</span></div>
		<div class="login_box">
			<div class="login_header">MEMBERS LOGIN</div>
			<form th:actionTest="@{/loginProcess}" th:action="@{/login_post}" method="post" style="text-align:center;" onsubmit="return login()">
				<div>
					<input type="hidden" name="username" id="username" value=""/>
					<input type="hidden" name="password" id="password" value=""/>
					<input type="hidden" id="RSAModulus"  th:value="${_RSAModules}" />
					<input type="hidden" id="RSAExponent" th:value="${_RSAExponent}" />
					<input type="text" class="login_info" id="username_text" th:value="${username}" placeholder="Type Your login-id" autocomplete="off" />
				</div> 
				<input type="password" class="login_info" id="password_text" placeholder="Type your password" autocomplete="off"/>
				<div th:if="${logout}">You have been logged out successfully</div>
			<div class="login_etc">
				<a class="login_reg" th:href="@{/registration}">Request registration</a>
			</div>
				<input type="submit" class="login_submit" value="Login" />
			</form>
			<div th:if="${error}" th:text="${error}" class="login_error"></div>
		</div>
	</div>
</body>
</html>
