/**
 * EasyUI for Angular 1.2.5
 * 
 * Copyright (c) 2009-2019 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the freeware license: https://www.jeasyui.com/license_freeware2.php
 * To use it on other terms please contact us: info@jeasyui.com
 *
 */
var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};import{Component,forwardRef,Input,HostListener}from"@angular/core";import{NG_VALUE_ACCESSOR}from"@angular/forms";import{SpinnerBaseComponent,SPINNER_BASE_TEMPLATE}from"../base/spinner-base.component";var NumberBoxComponent=function(_super){function NumberBoxComponent(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.min=null,_this.max=null,_this.increment=1,_this.precision=0,_this.decimalSeparator=".",_this.groupSeparator="",_this.prefix="",_this.suffix="",_this._text=null,_this}__extends(NumberBoxComponent,_super),NumberBoxComponent_1=NumberBoxComponent,Object.defineProperty(NumberBoxComponent.prototype,"text",{get:function(){return this._text=this._focused?this._text:this.textFormatter.call(this,this.value),this._text},set:function(v){this._text=v},enumerable:!0,configurable:!0}),NumberBoxComponent.prototype._defaultTextFormatter=function(value){return this.formatter.call(this,value)},NumberBoxComponent.prototype.ngOnInit=function(){this.value=this.parser.call(this,this.value)},NumberBoxComponent.prototype._onKeypress=function(event){if(this.focused)return this.filter.call(this,event)},NumberBoxComponent.prototype._onBlur=function(){this.value=this.parser.call(this,this._text)},NumberBoxComponent.prototype.filter=function(e){var s=this.text;if(e.metaKey||e.ctrlKey)return!0;if(-1!==["46","8","13","0"].indexOf(String(e.which)))return!0;var c=String.fromCharCode(e.which);return!c||("-"==c||c==this.decimalSeparator?-1==s.indexOf(c):c==this.groupSeparator||"0123456789".indexOf(c)>=0)},NumberBoxComponent.prototype.formatter=function(value){if(null==value)return null;var s=(value=parseFloat(value+"")).toFixed(this.precision),s1=s,s2="",dpos=s.indexOf(".");if(dpos>=0&&(s1=s.substring(0,dpos),s2=s.substring(dpos+1,s.length)),this.groupSeparator)for(var p=/(\d+)(\d{3})/;p.test(s1);)s1=s1.replace(p,"$1"+this.groupSeparator+"$2");return s2?this.prefix+s1+this.decimalSeparator+s2+this.suffix:this.prefix+s1+this.suffix},NumberBoxComponent.prototype.parser=function(s){if(null==s)return null;s=(s+"").trim(),this.prefix&&(s=s.replace(new RegExp("\\"+this.prefix,"g"),"")),this.suffix&&(s=s.replace(new RegExp("\\"+this.suffix,"g"),"")),this.groupSeparator&&(s=s.replace(new RegExp("\\"+this.groupSeparator,"g"),"")),this.decimalSeparator&&(s=s.replace(new RegExp("\\"+this.decimalSeparator,"g"),".")),s=s.replace(/\s/g,"");var v=parseFloat(s);return isNaN(v)?null:(v=parseFloat(v.toFixed(this.precision)),null!=this.min&&this.min>v&&(v=this.min),null!=this.max&&this.max<v&&(v=this.max),v)},NumberBoxComponent.prototype.doSpinUp=function(){var v=(this.value||0)+this.increment;this.value=this.parser(String(v))},NumberBoxComponent.prototype.doSpinDown=function(){var v=(this.value||0)-this.increment;this.value=this.parser(String(v))};var NumberBoxComponent_1;return __decorate([Input(),__metadata("design:type",Number)],NumberBoxComponent.prototype,"min",void 0),__decorate([Input(),__metadata("design:type",Number)],NumberBoxComponent.prototype,"max",void 0),__decorate([Input(),__metadata("design:type",Number)],NumberBoxComponent.prototype,"increment",void 0),__decorate([Input(),__metadata("design:type",Number)],NumberBoxComponent.prototype,"precision",void 0),__decorate([Input(),__metadata("design:type",String)],NumberBoxComponent.prototype,"decimalSeparator",void 0),__decorate([Input(),__metadata("design:type",String)],NumberBoxComponent.prototype,"groupSeparator",void 0),__decorate([Input(),__metadata("design:type",String)],NumberBoxComponent.prototype,"prefix",void 0),__decorate([Input(),__metadata("design:type",String)],NumberBoxComponent.prototype,"suffix",void 0),__decorate([Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],NumberBoxComponent.prototype,"text",null),__decorate([HostListener("keypress",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],NumberBoxComponent.prototype,"_onKeypress",null),__decorate([HostListener("blur"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],NumberBoxComponent.prototype,"_onBlur",null),NumberBoxComponent=NumberBoxComponent_1=__decorate([Component({selector:"eui-numberbox",template:SPINNER_BASE_TEMPLATE,providers:[{provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(function(){return NumberBoxComponent_1}),multi:!0}],host:{"[class.f-inline-row]":"true","[class.f-field]":"true"}})],NumberBoxComponent)}(SpinnerBaseComponent);export{NumberBoxComponent};