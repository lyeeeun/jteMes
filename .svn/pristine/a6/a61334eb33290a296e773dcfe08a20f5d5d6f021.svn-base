/**
 * EasyUI for Angular 1.2.5
 * 
 * Copyright (c) 2009-2019 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the freeware license: https://www.jeasyui.com/license_freeware2.php
 * To use it on other terms please contact us: info@jeasyui.com
 *
 */
var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};import{Component,ViewChild,Input,Output,EventEmitter,ElementRef}from"@angular/core";import{PanelComponent,PANEL_INNER_TEMPLATE}from"../panel/panel.component";import{DraggableDirective}from"../draggable/draggable.directive";import{ResizableDirective}from"../resizable/resizable.directive";import{domHelper}from"../base/domhelper";export var DIALOG_TEMPLATE='\n\t<div #panel *ngIf="!closed" class="panel f-column f-full" [ngClass]="panelCls" [ngStyle]="panelStyle" \n\t\t\teuiDraggable euiResizable>\n'+PANEL_INNER_TEMPLATE+"\n\t</div>\n";var DialogComponent=function(_super){function DialogComponent(hostRef){var _this=_super.call(this,hostRef)||this;return _this.hostRef=hostRef,_this.title=null,_this.border=!1,_this.borderType="thick",_this.closable=!0,_this.modal=!1,_this.draggable=!1,_this.resizable=!1,_this.draggableOptions={},_this.resizableOptions={},_this.onOpen=new EventEmitter,_this.onClose=new EventEmitter,_this.maskEl=null,_this.initialized=!1,_this._panelCls=null,_this._headerCls=null,_this._bodyCls=null,_this._footerCls=null,_this._closed=!1,_this}__extends(DialogComponent,_super),DialogComponent_1=DialogComponent,Object.defineProperty(DialogComponent.prototype,"panelCls",{get:function(){var cls="window window-shadow";return"none"==this.borderType?cls+=" window-thinborder window-noborder":"thin"==this.borderType&&(cls+=" window-thinborder"),cls+=this._panelCls?" "+this._panelCls:""},set:function(value){this._panelCls=value},enumerable:!0,configurable:!0}),Object.defineProperty(DialogComponent.prototype,"headerCls",{get:function(){var cls="window-header";return cls+=this._headerCls?" "+this._headerCls:""},set:function(value){this._headerCls=value},enumerable:!0,configurable:!0}),Object.defineProperty(DialogComponent.prototype,"bodyCls",{get:function(){var cls="window-body";return this.hasHeader||(cls+=" window-body-noheader"),cls+=this._bodyCls?" "+this._bodyCls:""},set:function(value){this._bodyCls=value},enumerable:!0,configurable:!0}),Object.defineProperty(DialogComponent.prototype,"footerCls",{get:function(){var cls="window-footer";return cls+=this._footerCls?" "+this._footerCls:""},set:function(value){this._footerCls=value},enumerable:!0,configurable:!0}),Object.defineProperty(DialogComponent.prototype,"closed",{get:function(){return this._closed},set:function(value){this._closed!=value&&(this._closed=value,this.initialized&&(this.initDialog(),this._closed?this.onClose.emit():this.onOpen.emit()))},enumerable:!0,configurable:!0}),DialogComponent.prototype.ngAfterViewInit=function(){this.initialized=!0,this.initDialog()},DialogComponent.prototype.ngOnDestroy=function(){this.closeMask(),this.panelRef&&this.hostRef.nativeElement.appendChild(this.panelRef.nativeElement)},DialogComponent.prototype.initDialog=function(){var _this=this;this.closed?this.closeMask():this.panelRef?(document.body.appendChild(this.panelRef.nativeElement),this.openMask(),this.displaying()):setTimeout(function(){_this.panelRef&&(document.body.appendChild(_this.panelRef.nativeElement),_this.openMask(),_this.displaying())})},DialogComponent.prototype.openMask=function(){this.modal&&!this.maskEl&&(this.maskEl=document.createElement("div"),domHelper.addClass(this.maskEl,"window-mask"),document.body.appendChild(this.maskEl))},DialogComponent.prototype.closeMask=function(){this.maskEl&&(document.body.removeChild(this.maskEl),this.maskEl=null)},DialogComponent.prototype.open=function(){this.closed=!1},DialogComponent.prototype.close=function(){this.closed=!0},DialogComponent.prototype.displaying=function(){var _this=this;this.moveToTop(),this.panelStyle?(this.panelStyle.hasOwnProperty("left")||this.hcenter(),this.panelStyle.hasOwnProperty("top")||this.vcenter()):this.center(),this.draggableRef&&(Object.assign(this.draggableRef,{edge:5,disabled:!this.draggable,handle:this.headerRef},this.draggableOptions),this.draggableRef.dragEnd.subscribe(function(state){_this.panelStyle=_this.panelStyle||{},Object.assign(_this.panelStyle,{left:state.left+"px",top:state.top+"px"})})),this.resizableRef&&(Object.assign(this.resizableRef,{edge:5,disabled:!this.resizable},this.resizableOptions),this.resizableRef.resizeStop.subscribe(function(state){_this.panelStyle=_this.panelStyle||{},Object.assign(_this.panelStyle,{width:state.width+"px",height:state.height+"px"})}))},DialogComponent.prototype.moveToTop=function(){this.maskEl&&(this.maskEl.style.zIndex=String(DialogComponent_1.zIndex++)),this.panelRef&&(this.panelRef.nativeElement.style.zIndex=String(DialogComponent_1.zIndex++))},DialogComponent.prototype.hcenter=function(){if(this.panelRef){var view=domHelper.getViewport(),width=domHelper.outerWidth(this.panelRef.nativeElement),left=(view.width-width)/2;this.panelStyle=this.panelStyle||{},Object.assign(this.panelStyle,{left:left+"px"})}},DialogComponent.prototype.vcenter=function(){if(this.panelRef){var view=domHelper.getViewport(),height=domHelper.outerHeight(this.panelRef.nativeElement),scrollTop=domHelper.getScrollTop(),top_1=(view.height-height)/2+scrollTop;this.panelStyle=this.panelStyle||{},Object.assign(this.panelStyle,{top:top_1+"px"})}},DialogComponent.prototype.center=function(){this.hcenter(),this.vcenter()};var DialogComponent_1;return DialogComponent.zIndex=9e3,__decorate([ViewChild(DraggableDirective),__metadata("design:type",DraggableDirective)],DialogComponent.prototype,"draggableRef",void 0),__decorate([ViewChild(ResizableDirective),__metadata("design:type",ResizableDirective)],DialogComponent.prototype,"resizableRef",void 0),__decorate([Input(),__metadata("design:type",String)],DialogComponent.prototype,"title",void 0),__decorate([Input(),__metadata("design:type",Boolean)],DialogComponent.prototype,"border",void 0),__decorate([Input(),__metadata("design:type",String)],DialogComponent.prototype,"borderType",void 0),__decorate([Input(),__metadata("design:type",Boolean)],DialogComponent.prototype,"closable",void 0),__decorate([Input(),__metadata("design:type",Boolean)],DialogComponent.prototype,"modal",void 0),__decorate([Input(),__metadata("design:type",Boolean)],DialogComponent.prototype,"draggable",void 0),__decorate([Input(),__metadata("design:type",Boolean)],DialogComponent.prototype,"resizable",void 0),__decorate([Input(),__metadata("design:type",Object)],DialogComponent.prototype,"draggableOptions",void 0),__decorate([Input(),__metadata("design:type",Object)],DialogComponent.prototype,"resizableOptions",void 0),__decorate([Output("open"),__metadata("design:type",Object)],DialogComponent.prototype,"onOpen",void 0),__decorate([Output("close"),__metadata("design:type",Object)],DialogComponent.prototype,"onClose",void 0),__decorate([Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],DialogComponent.prototype,"panelCls",null),__decorate([Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],DialogComponent.prototype,"headerCls",null),__decorate([Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],DialogComponent.prototype,"bodyCls",null),__decorate([Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],DialogComponent.prototype,"footerCls",null),__decorate([Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],DialogComponent.prototype,"closed",null),DialogComponent=DialogComponent_1=__decorate([Component({selector:"eui-dialog",template:DIALOG_TEMPLATE,host:{class:"f-column"}}),__metadata("design:paramtypes",[ElementRef])],DialogComponent)}(PanelComponent);export{DialogComponent};