/**
 * EasyUI for Angular 1.2.5
 * 
 * Copyright (c) 2009-2019 www.jeasyui.com. All rights reserved.
 *
 * Licensed under the freeware license: https://www.jeasyui.com/license_freeware2.php
 * To use it on other terms please contact us: info@jeasyui.com
 *
 */
var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};import{Component,forwardRef,ViewChild,ContentChildren,QueryList,Input,Output,EventEmitter,ElementRef}from"@angular/core";import{TabPanelComponent}from"./tab-panel.component";import{domHelper}from"../base/domhelper";export var TABS_TEMPLATE='\n\t<div #container class="tabs-container f-full" [ngClass]="containerCls">\n\t\t<div #header class="tabs-header f-row f-noshrink"\n\t\t\t\t[style.width.px]="isHorizontal() ? headerWidth : null"\n\t\t\t\t[style.height.px]="!isHorizontal() ? headerHeight : null"\n\t\t\t\t[class.tabs-header-plain]="plain"\n\t\t\t\t[class.tabs-header-narrow]="narrow"\n\t\t\t\t[class.tabs-header-noborder]="!border"\n\t\t\t\t[ngClass]="headerCls">\n\t\t\t<div *ngIf="isScrollerVisible()" class="tabs-scroller-left f-order1" (click)="scrollBy(-scrollIncrement)"></div>\n\t\t\t<div *ngIf="isScrollerVisible()" class="tabs-scroller-right f-order3" (click)="scrollBy(scrollIncrement)"></div>\n\t\t\t<div #tabsWrap class="tabs-wrap f-column f-full f-order2">\n\t\t\t\t<ul *ngIf="isScrollable()" class="tabs tabs-scrollable f-full" style="width:100%"></ul>\n\t\t\t\t<ul #tabs class="tabs f-full"\n\t\t\t\t\t\t[ngStyle]="tabsStyle"\n\t\t\t\t\t\t[class.f-row]="!isHorizontal()"\n\t\t\t\t\t\t[class.f-column]="isHorizontal()"\n\t\t\t\t\t\t[class.tabs-scrollable]="isScrollable()"\n\t\t\t\t\t\t[class.tabs-narrow]="narrow">\n\t\t\t\t\t<li class="f-inline-row" *ngFor="let panel of usedPanels"\n\t\t\t\t\t\t\t[class.f-full]="justified"\n\t\t\t\t\t\t\t[class.f-noshrink]="isScrollable()"\n\t\t\t\t\t\t\t[class.tabs-selected]="panel.selected"\n\t\t\t\t\t\t\t[class.tabs-disabled]="panel.disabled"\n\t\t\t\t\t\t\t[class.tabs-first]="panel.isFirst"\n\t\t\t\t\t\t\t[class.tabs-last]="panel.isLast"\n\t\t\t\t\t\t\t(click)="onClickTab(panel,$event)">\n\t\t\t\t\t\t<a href="javascript:;" class="tabs-inner f-inline-row f-full"\n\t\t\t\t\t\t\t\t[style.width.px]="!isHorizontal() ? tabWidth : null"\n\t\t\t\t\t\t\t\t[style.height.px]="isHorizontal() ? tabHeight : null"\n\t\t\t\t\t\t\t\t[ngClass]="panel.headerCls"\n\t\t\t\t\t\t\t\t[ngStyle]="panel.headerStyle">\n\t\t\t\t\t\t\t<span *ngIf="!panel.headerTemplate" class="tabs-title"\n\t\t\t\t\t\t\t\t\t[class.tabs-with-icon]="panel.iconCls"\n\t\t\t\t\t\t\t\t\t[class.tabs-closable]="panel.closable">{{panel.title}}</span>\n\t\t\t\t\t\t\t<ng-template *ngIf="panel.headerTemplate" [euiTabHeaderTemplate]="panel.headerTemplate.template" [tab]="panel"></ng-template>\n\t\t\t\t\t\t\t<span *ngIf="panel.iconCls" class="tabs-icon" [ngClass]="panel.iconCls"></span>\n\t\t\t\t\t\t\t<a *ngIf="panel.closable" href="javascript:;" class="tabs-close" tabindex="-1" (click)="onCloseTab(panel,$event)"></a>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="tabs-panels f-column f-full" [class.tabs-panels-noborder]="!border" [ngClass]="bodyCls">\n\t\t\t<ng-content></ng-content>\n\t\t</div>\n\t</div>\n';var TabsComponent=function(){function TabsComponent(){this.headerWidth=150,this.headerHeight=35,this.tabWidth=null,this.tabHeight=32,this.tabPosition="top",this.plain=!1,this.narrow=!1,this.justified=!1,this.border=!0,this.scrollable=!1,this.scrollIncrement=100,this.tabSelect=new EventEmitter,this.tabUnselect=new EventEmitter,this.tabClose=new EventEmitter,this.selectedIndexChange=new EventEmitter,this.selectedHis=[],this._selectedIndex=0,this._scrollDistance=0}return Object.defineProperty(TabsComponent.prototype,"containerCls",{get:function(){return this.isHorizontal()?"f-row":"f-column"},enumerable:!0,configurable:!0}),Object.defineProperty(TabsComponent.prototype,"headerCls",{get:function(){return"bottom"==this.tabPosition?"tabs-header-bottom f-order2":"left"==this.tabPosition?"tabs-header-left f-column":"right"==this.tabPosition?"tabs-header-right f-column f-order2":null},enumerable:!0,configurable:!0}),Object.defineProperty(TabsComponent.prototype,"bodyCls",{get:function(){return"bottom"==this.tabPosition?"tabs-panels-top":"left"==this.tabPosition?"tabs-panels-right":"right"==this.tabPosition?"tabs-panels-left":null},enumerable:!0,configurable:!0}),Object.defineProperty(TabsComponent.prototype,"tabsStyle",{get:function(){return this.isScrollable()?{left:-this.scrollDistance+"px"}:null},enumerable:!0,configurable:!0}),TabsComponent.prototype.isHorizontal=function(){return"left"==this.tabPosition||"right"==this.tabPosition},TabsComponent.prototype.isScrollable=function(){return!this.isHorizontal()&&(this.scrollable&&!this.justified)},TabsComponent.prototype.isScrollerVisible=function(){return!!this.isScrollable()&&this.maxScrollDistance>0},Object.defineProperty(TabsComponent.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(value){null==value&&(value=-1),this._selectedIndex=value,this.panels&&this.select(value)},enumerable:!0,configurable:!0}),Object.defineProperty(TabsComponent.prototype,"scrollDistance",{get:function(){return this._scrollDistance},set:function(value){null==value&&(value=0);var maxDistance=this.maxScrollDistance;value>maxDistance&&(value=maxDistance),value<0&&(value=0),this._scrollDistance=value},enumerable:!0,configurable:!0}),Object.defineProperty(TabsComponent.prototype,"usedPanels",{get:function(){return this.panels.filter(function(p){return p.isUsed})},enumerable:!0,configurable:!0}),Object.defineProperty(TabsComponent.prototype,"maxScrollDistance",{get:function(){var width=this.tabsRef.nativeElement.scrollWidth,wrapWidth=this.tabsWrapRef.nativeElement.offsetWidth;return width>wrapWidth?width-wrapWidth:0},enumerable:!0,configurable:!0}),TabsComponent.prototype.setScrollers=function(){if(this.isScrollable()){this.scrollDistance;var panel=this.getSelectedPanel();if(panel){var wrapWidth=domHelper.outerWidth(this.tabsWrapRef.nativeElement),index=this.getPanelIndex(panel),li=this.tabsRef.nativeElement.children[index],width=domHelper.outerWidth(li,!0),left=domHelper.position(li).left-this.scrollDistance,right=left+width;if(left<0){distance=left-(wrapWidth-width)/2;this.scrollBy(distance)}else if(right>wrapWidth){var distance=left-(wrapWidth-width)/2;this.scrollBy(distance)}else this.scrollBy(0)}}},TabsComponent.prototype.ngAfterContentInit=function(){var _this=this;this.initPanels(),this.panels.changes.subscribe(function(){_this.initPanels()})},TabsComponent.prototype.onClickTab=function(panel,event){event.stopPropagation(),panel.select()},TabsComponent.prototype.onCloseTab=function(panel,event){event.stopPropagation(),panel.disabled||panel.close()},TabsComponent.prototype.initPanels=function(){if(this.panels.length){this.panels.forEach(function(p){p.isFirst=!1,p.isLast=!1});var pp=this.panels.filter(function(p){return p.isUsed});pp.length&&(pp[0].isFirst=!0,pp[pp.length-1].isLast=!0),this.initSelectedPanel()}this.setScrollers()},TabsComponent.prototype.initSelectedPanel=function(){var _this=this,panel=this.getSelectedPanel();panel||(panel=this.selectedHis.pop()),panel||(panel=this.getPanel(this.selectedIndex)),panel&&(this.usedPanels.filter(function(p){return p!=panel}).forEach(function(p){return p.selected=!1}),panel.selected=!0,this.selectedHis=this.selectedHis.filter(function(p){return-1!=_this.getPanelIndex(p)}),this.removeHis(panel),this.addHis(panel))},TabsComponent.prototype.addHis=function(panel){this.selectedHis.push(panel)},TabsComponent.prototype.removeHis=function(panel){this.selectedHis=this.selectedHis.filter(function(p){return p!=panel})},TabsComponent.prototype.backHis=function(){var panel=this.selectedHis.pop();panel?(this.removeHis(panel),panel.select()):this.select(0)},TabsComponent.prototype.select=function(index){var panel=this.getPanel(index);panel&&panel.select()},TabsComponent.prototype.unselect=function(index){var panel=this.getPanel(index);panel&&panel.unselect()},TabsComponent.prototype.getPanel=function(index){return this.usedPanels[index]},TabsComponent.prototype.getPanelIndex=function(tab){for(var pp=this.usedPanels,i=0;i<pp.length;i++)if(pp[i]==tab)return i;return-1},TabsComponent.prototype.getSelectedPanel=function(){var pp=this.usedPanels.filter(function(p){return p.selected&&!p.disabled});return pp.length?pp[0]:null},TabsComponent.prototype.scrollBy=function(distance){this.scrollDistance+=distance},__decorate([ContentChildren(forwardRef(function(){return TabPanelComponent})),__metadata("design:type",QueryList)],TabsComponent.prototype,"panels",void 0),__decorate([ViewChild("container"),__metadata("design:type",ElementRef)],TabsComponent.prototype,"containerRef",void 0),__decorate([ViewChild("header"),__metadata("design:type",ElementRef)],TabsComponent.prototype,"headerRef",void 0),__decorate([ViewChild("tabsWrap"),__metadata("design:type",ElementRef)],TabsComponent.prototype,"tabsWrapRef",void 0),__decorate([ViewChild("tabs"),__metadata("design:type",ElementRef)],TabsComponent.prototype,"tabsRef",void 0),__decorate([Input(),__metadata("design:type",Number)],TabsComponent.prototype,"headerWidth",void 0),__decorate([Input(),__metadata("design:type",Number)],TabsComponent.prototype,"headerHeight",void 0),__decorate([Input(),__metadata("design:type",Number)],TabsComponent.prototype,"tabWidth",void 0),__decorate([Input(),__metadata("design:type",Number)],TabsComponent.prototype,"tabHeight",void 0),__decorate([Input(),__metadata("design:type",String)],TabsComponent.prototype,"tabPosition",void 0),__decorate([Input(),__metadata("design:type",Boolean)],TabsComponent.prototype,"plain",void 0),__decorate([Input(),__metadata("design:type",Boolean)],TabsComponent.prototype,"narrow",void 0),__decorate([Input(),__metadata("design:type",Boolean)],TabsComponent.prototype,"justified",void 0),__decorate([Input(),__metadata("design:type",Boolean)],TabsComponent.prototype,"border",void 0),__decorate([Input(),__metadata("design:type",Boolean)],TabsComponent.prototype,"scrollable",void 0),__decorate([Input(),__metadata("design:type",Number)],TabsComponent.prototype,"scrollIncrement",void 0),__decorate([Output(),__metadata("design:type",Object)],TabsComponent.prototype,"tabSelect",void 0),__decorate([Output(),__metadata("design:type",Object)],TabsComponent.prototype,"tabUnselect",void 0),__decorate([Output(),__metadata("design:type",Object)],TabsComponent.prototype,"tabClose",void 0),__decorate([Output(),__metadata("design:type",Object)],TabsComponent.prototype,"selectedIndexChange",void 0),__decorate([Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],TabsComponent.prototype,"selectedIndex",null),__decorate([Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],TabsComponent.prototype,"scrollDistance",null),TabsComponent=__decorate([Component({selector:"eui-tabs",template:TABS_TEMPLATE,host:{class:"f-column"}})],TabsComponent)}();export{TabsComponent};